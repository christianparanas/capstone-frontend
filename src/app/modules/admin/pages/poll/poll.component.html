<div class="relative z-40 mt-20 pb-20">
  <h1 class="font-bold text-xl md:text-3xl text-white">Polls</h1>

  <div class="mt-20 pb-10">
    <div class="flex justify-between items-center">
      <div class=""></div>
      <div class=""></div>
    </div>

    <div *ngIf="isLoading" class="grid md:grid-cols-2 gap-3 mt-20">
      <p-skeleton
        width="100%"
        height="180px"
        *ngFor="let arr of ['', '', '', '', '', '']"
      ></p-skeleton>
    </div>

    <div
      *ngIf="!isLoading && polls.length == 0"
      class="grid place-items-center"
    >
      <div class="">
        <img
          src="../../../../../assets/images/empty-box.png"
          alt=""
          class="w-[300px] object-cover"
        />
        <h1 class="text-center mt-10 font-semibold text-slate-800">
          No polls. Create one.
        </h1>
      </div>
    </div>

    <div *ngIf="!isLoading && polls" class="mt-10 grid gap-3 lg:grid-cols-2">
      <div
        *ngFor="let poll of polls"
        class="grid divide-y p-4 shadow-md relative rounded-xl border-2 border-gray-100 h-fit"
      >
        <div class="pb-2">
          <h1 class="text-2xl font-bold text-slate-800">{{ poll.title }}</h1>
          <p
            class="bg-slate-50 mt-2 py-1 px-2 rounded-md text-[12px] text-slate-800"
          >
            {{ poll.description }}
          </p>

          <div class="grid items-center mt-3">
            <div class="text-[12px]">
              <h2 class="font-bold">Restrictions:</h2>

              <div class="p-1 grid divide-y w-fit">
                <div class="py-1 pb-2">
                  Course:
                  {{
                    poll.course == 0 ? "All Courses" : getCourse(poll.course)
                  }}
                </div>
                <div class="py-1">
                  Section:
                  {{ poll.section == 0 ? "All section" : poll.section }}
                </div>
                <div class="py-1">
                  Year level:
                  {{ poll.year == 0 ? "All year levels" : poll.year }}
                </div>
              </div>
            </div>

            <div class="text-[12px] mb-1">
              Poll posted by {{ poll.User.name }}
            </div>

            <div
              *ngIf="poll.published"
              class="text-[10px] text-white font-semibold bg-slate-800 px-2 py-1 rounded-md w-fit"
            >
              Poll ends: {{ dateFormat(poll.endsAt) }}
            </div>
            <div
              *ngIf="!poll.published"
              class="text-[10px] text-white font-semibold bg-red-500 px-2 py-1 rounded-md w-fit"
            >
              Poll ended
            </div>
          </div>
        </div>

        <div class="">
          <div class="my-5 ml-2 font-semibold text-slate-800">
            {{ poll.PollQuestion.question }}
          </div>

          <div class="grid gap-1">
            <div
              *ngFor="let answer of poll.PollQuestion.PollAnswers"
              class="flex justify-between items-center text-[12px] py-3 px-4 font-semibold rounded-xl text-slate-800 bg-gray-100"
            >
              <div class="capitalize">{{ answer.answer }}</div>
              <div class="">
                {{
                  answer.PollVotes.length > 0
                    ? answer.PollVotes.length > 1
                      ? answer.PollVotes.length + " votes"
                      : answer.PollVotes.length + " vote"
                    : ""
                }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
